var En=Object.defineProperty,Fn=(e,t,i)=>t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ue=(e,t,i)=>Fn(e,typeof t!="symbol"?t+"":t,i),Qi=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Qi||{}),ae;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(ae||(ae={}));function Ln(e){return e.nodeType===e.ELEMENT_NODE}function pt(e){var t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function mt(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Dn(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function $t(e){try{var t=e.rules||e.cssRules;return t?Dn(Array.from(t).map(Ji).join("")):null}catch{return null}}function Ji(e){var t=e.cssText;if(Wn(e))try{t=$t(e.styleSheet)||t}catch{}return t}function Wn(e){return"styleSheet"in e}var Xi=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var i;if(!t)return-1;var n=(i=this.getMeta(t))===null||i===void 0?void 0:i.id;return n??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var i=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return i.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,i){var n=i.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,i)},e.prototype.replace=function(t,i){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(i,o)}this.idNodeMap.set(t,i)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Vn(){return new Xi}function li(e){var t=e.maskInputOptions,i=e.tagName,n=e.type,o=e.value,r=e.maskInputFn,a=o||"";return(t[i.toLowerCase()]||t[n])&&(r?a=r(a):a="*".repeat(a.length)),a}var fi="__rrweb_original__";function _n(e){var t=e.getContext("2d");if(!t)return!0;for(var i=50,n=0;n<e.width;n+=i)for(var o=0;o<e.height;o+=i){var r=t.getImageData,a=fi in r?r[fi]:r,s=new Uint32Array(a.call(t,n,o,Math.min(i,e.width-n),Math.min(i,e.height-o)).data.buffer);if(s.some(function(c){return c!==0}))return!1}return!0}var Gn=1,Un=new RegExp("[^a-z0-9-_:]"),ft=-2;function $i(){return Gn++}function Zn(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return Un.test(t)?"div":t}function Bn(e){return e.cssRules?Array.from(e.cssRules).map(function(t){return t.cssText||""}).join(""):""}function Kn(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Ue,Ii,zn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Hn=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,Yn=/^(data:)([^,]*),(.*)/i;function Tt(e,t){return(e||"").replace(zn,function(i,n,o,r,a,s){var c=o||a||s,d=n||r||"";if(!c)return i;if(!Hn.test(c)||Yn.test(c))return"url(".concat(d).concat(c).concat(d,")");if(c[0]==="/")return"url(".concat(d).concat(Kn(t)+c).concat(d,")");var l=t.split("/"),u=c.split("/");l.pop();for(var C=0,b=u;C<b.length;C++){var m=b[C];m!=="."&&(m===".."?l.pop():l.push(m))}return"url(".concat(d).concat(l.join("/")).concat(d,")")})}var jn=/^[^ \t\n\r\u000c]+/,qn=/^[, \t\n\r\u000c]+/;function Pn(e,t){if(t.trim()==="")return t;var i=0;function n(d){var l,u=d.exec(t.substring(i));return u?(l=u[0],i+=l.length,l):""}for(var o=[];n(qn),!(i>=t.length);){var r=n(jn);if(r.slice(-1)===",")r=Nt(e,r.substring(0,r.length-1)),o.push(r);else{var a="";r=Nt(e,r);for(var s=!1;;){var c=t.charAt(i);if(c===""){o.push((r+a).trim());break}else if(s)c===")"&&(s=!1);else if(c===","){i+=1,o.push((r+a).trim());break}else c==="("&&(s=!0);a+=c,i+=1}}}return o.join(", ")}function Nt(e,t){if(!t||t.trim()==="")return t;var i=e.createElement("a");return i.href=t,i.href}function Qn(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function di(){var e=document.createElement("a");return e.href="",e.href}function en(e,t,i,n){return i==="src"||i==="href"&&n&&!(t==="use"&&n[0]==="#")||i==="xlink:href"&&n&&n[0]!=="#"||i==="background"&&n&&(t==="table"||t==="td"||t==="th")?Nt(e,n):i==="srcset"&&n?Pn(e,n):i==="style"&&n?Tt(n,di()):t==="object"&&i==="data"&&n?Nt(e,n):n}function Jn(e,t,i){if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return i?e.matches(i):!1}function Ot(e,t,i){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return i?Ot(e.parentNode,t,i):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return i?Ot(e.parentNode,t,i):!1}function tn(e,t,i){var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(Ot(n,t,!0))return!0;return!!(i&&(n.matches(i)||n.closest(i)))}function Xn(e,t,i){var n=e.contentWindow;if(n){var o=!1,r;try{r=n.document.readyState}catch{return}if(r!=="complete"){var a=setTimeout(function(){o||(t(),o=!0)},i);e.addEventListener("load",function(){clearTimeout(a),o=!0,t()});return}var s="about:blank";if(n.location.href!==s||e.src===s||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function $n(e,t,i){var n=!1,o;try{o=e.sheet}catch{return}if(!o){var r=setTimeout(function(){n||(t(),n=!0)},i);e.addEventListener("load",function(){clearTimeout(r),n=!0,t()})}}function eo(e,t){var i=t.doc,n=t.mirror,o=t.blockClass,r=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,c=t.inlineStylesheet,d=t.maskInputOptions,l=d===void 0?{}:d,u=t.maskTextFn,C=t.maskInputFn,b=t.dataURLOptions,m=b===void 0?{}:b,w=t.inlineImages,S=t.recordCanvas,k=t.keepIframeSrcFn,v=t.newlyAddedElement,y=v===void 0?!1:v,T=to(i,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ae.Document,childNodes:[],compatMode:e.compatMode}:{type:ae.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ae.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:T};case e.ELEMENT_NODE:return no(e,{doc:i,blockClass:o,blockSelector:r,inlineStylesheet:c,maskInputOptions:l,maskInputFn:C,dataURLOptions:m,inlineImages:w,recordCanvas:S,keepIframeSrcFn:k,newlyAddedElement:y,rootId:T});case e.TEXT_NODE:return io(e,{maskTextClass:a,maskTextSelector:s,maskTextFn:u,rootId:T});case e.CDATA_SECTION_NODE:return{type:ae.CDATA,textContent:"",rootId:T};case e.COMMENT_NODE:return{type:ae.Comment,textContent:e.textContent||"",rootId:T};default:return!1}}function to(e,t){if(t.hasNode(e)){var i=t.getId(e);return i===1?void 0:i}}function io(e,t){var i,n=t.maskTextClass,o=t.maskTextSelector,r=t.maskTextFn,a=t.rootId,s=e.parentNode&&e.parentNode.tagName,c=e.textContent,d=s==="STYLE"?!0:void 0,l=s==="SCRIPT"?!0:void 0;if(d&&c){try{e.nextSibling||e.previousSibling||!((i=e.parentNode.sheet)===null||i===void 0)&&i.cssRules&&(c=Bn(e.parentNode.sheet))}catch(u){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(u),e)}c=Tt(c,di())}return l&&(c="SCRIPT_PLACEHOLDER"),!d&&!l&&c&&tn(e,n,o)&&(c=r?r(c):c.replace(/[\S]/g,"*")),{type:ae.Text,textContent:c||"",isStyle:d,rootId:a}}function no(e,t){for(var i=t.doc,n=t.blockClass,o=t.blockSelector,r=t.inlineStylesheet,a=t.maskInputOptions,s=a===void 0?{}:a,c=t.maskInputFn,d=t.dataURLOptions,l=d===void 0?{}:d,u=t.inlineImages,C=t.recordCanvas,b=t.keepIframeSrcFn,m=t.newlyAddedElement,w=m===void 0?!1:m,S=t.rootId,k=Jn(e,n,o),v=Zn(e),y={},T=e.attributes.length,W=0;W<T;W++){var L=e.attributes[W];y[L.name]=en(i,v,L.name,L.value)}if(v==="link"&&r){var N=Array.from(i.styleSheets).find(function(ce){return ce.href===e.href}),A=null;N&&(A=$t(N)),A&&(delete y.rel,delete y.href,y._cssText=Tt(A,N.href))}if(v==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var A=$t(e.sheet);A&&(y._cssText=Tt(A,di()))}if(v==="input"||v==="textarea"||v==="select"){var Q=e.value,_=e.checked;y.type!=="radio"&&y.type!=="checkbox"&&y.type!=="submit"&&y.type!=="button"&&Q?y.value=li({type:y.type,tagName:v,value:Q,maskInputOptions:s,maskInputFn:c}):_&&(y.checked=_)}if(v==="option"&&(e.selected&&!s.select?y.selected=!0:delete y.selected),v==="canvas"&&C){if(e.__context==="2d")_n(e)||(y.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){var se=e.toDataURL(l.type,l.quality),G=document.createElement("canvas");G.width=e.width,G.height=e.height;var X=G.toDataURL(l.type,l.quality);se!==X&&(y.rr_dataURL=se)}}if(v==="img"&&u){Ue||(Ue=i.createElement("canvas"),Ii=Ue.getContext("2d"));var F=e,B=F.crossOrigin;F.crossOrigin="anonymous";var Y=function(){try{Ue.width=F.naturalWidth,Ue.height=F.naturalHeight,Ii.drawImage(F,0,0),y.rr_dataURL=Ue.toDataURL(l.type,l.quality)}catch(ce){console.warn("Cannot inline img src=".concat(F.currentSrc,"! Error: ").concat(ce))}B?y.crossOrigin=B:F.removeAttribute("crossorigin")};F.complete&&F.naturalWidth!==0?Y():F.onload=Y}if((v==="audio"||v==="video")&&(y.rr_mediaState=e.paused?"paused":"played",y.rr_mediaCurrentTime=e.currentTime),w||(e.scrollLeft&&(y.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(y.rr_scrollTop=e.scrollTop)),k){var D=e.getBoundingClientRect(),j=D.width,H=D.height;y={class:y.class,rr_width:"".concat(j,"px"),rr_height:"".concat(H,"px")}}return v==="iframe"&&!b(y.src)&&(e.contentDocument||(y.rr_src=y.src),delete y.src),{type:ae.Element,tagName:v,attributes:y,childNodes:[],isSVG:Qn(e)||void 0,needBlock:k,rootId:S}}function Z(e){return e===void 0?"":e.toLowerCase()}function oo(e,t){return!!(t.comment&&e.type===ae.Comment||e.type===ae.Element&&(t.script&&(e.tagName==="script"||e.tagName==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js"))||t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Z(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Z(e.attributes.name)==="application-name"||Z(e.attributes.rel)==="icon"||Z(e.attributes.rel)==="apple-touch-icon"||Z(e.attributes.rel)==="shortcut icon"))||e.tagName==="meta"&&(t.headMetaDescKeywords&&Z(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(Z(e.attributes.property).match(/^(og|twitter|fb):/)||Z(e.attributes.name).match(/^(og|twitter):/)||Z(e.attributes.name)==="pinterest")||t.headMetaRobots&&(Z(e.attributes.name)==="robots"||Z(e.attributes.name)==="googlebot"||Z(e.attributes.name)==="bingbot")||t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0||t.headMetaAuthorship&&(Z(e.attributes.name)==="author"||Z(e.attributes.name)==="generator"||Z(e.attributes.name)==="framework"||Z(e.attributes.name)==="publisher"||Z(e.attributes.name)==="progid"||Z(e.attributes.property).match(/^article:/)||Z(e.attributes.property).match(/^product:/))||t.headMetaVerification&&(Z(e.attributes.name)==="google-site-verification"||Z(e.attributes.name)==="yandex-verification"||Z(e.attributes.name)==="csrf-token"||Z(e.attributes.name)==="p:domain_verify"||Z(e.attributes.name)==="verify-v1"||Z(e.attributes.name)==="verification"||Z(e.attributes.name)==="shopify-checkout-api-token"))))}function ze(e,t){var i=t.doc,n=t.mirror,o=t.blockClass,r=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,c=t.skipChild,d=c===void 0?!1:c,l=t.inlineStylesheet,u=l===void 0?!0:l,C=t.maskInputOptions,b=C===void 0?{}:C,m=t.maskTextFn,w=t.maskInputFn,S=t.slimDOMOptions,k=t.dataURLOptions,v=k===void 0?{}:k,y=t.inlineImages,T=y===void 0?!1:y,W=t.recordCanvas,L=W===void 0?!1:W,N=t.onSerialize,A=t.onIframeLoad,Q=t.iframeLoadTimeout,_=Q===void 0?5e3:Q,se=t.onStylesheetLoad,G=t.stylesheetLoadTimeout,X=G===void 0?5e3:G,F=t.keepIframeSrcFn,B=F===void 0?function(){return!1}:F,Y=t.newlyAddedElement,D=Y===void 0?!1:Y,j=t.preserveWhiteSpace,H=j===void 0?!0:j,ce=eo(e,{doc:i,mirror:n,blockClass:o,blockSelector:r,maskTextClass:a,maskTextSelector:s,inlineStylesheet:u,maskInputOptions:b,maskTextFn:m,maskInputFn:w,dataURLOptions:v,inlineImages:T,recordCanvas:L,keepIframeSrcFn:B,newlyAddedElement:D});if(!ce)return console.warn(e,"not serialized"),null;var $;n.hasNode(e)?$=n.getId(e):oo(ce,S)||!H&&ce.type===ae.Text&&!ce.isStyle&&!ce.textContent.replace(/^\s+|\s+$/gm,"").length?$=ft:$=$i();var U=Object.assign(ce,{id:$});if(n.add(e,U),$===ft)return null;N&&N(e);var ie=!d;if(U.type===ae.Element){ie=ie&&!U.needBlock,delete U.needBlock;var q=e.shadowRoot;q&&mt(q)&&(U.isShadowHost=!0)}if((U.type===ae.Document||U.type===ae.Element)&&ie){S.headWhitespace&&U.type===ae.Element&&U.tagName==="head"&&(H=!1);for(var J={doc:i,mirror:n,blockClass:o,blockSelector:r,maskTextClass:a,maskTextSelector:s,skipChild:d,inlineStylesheet:u,maskInputOptions:b,maskTextFn:m,maskInputFn:w,slimDOMOptions:S,dataURLOptions:v,inlineImages:T,recordCanvas:L,preserveWhiteSpace:H,onSerialize:N,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:se,stylesheetLoadTimeout:X,keepIframeSrcFn:B},M=0,ne=Array.from(e.childNodes);M<ne.length;M++){var oe=ne[M],z=ze(oe,J);z&&U.childNodes.push(z)}if(Ln(e)&&e.shadowRoot)for(var de=0,R=Array.from(e.shadowRoot.childNodes);de<R.length;de++){var oe=R[de],z=ze(oe,J);z&&(mt(e.shadowRoot)&&(z.isShadow=!0),U.childNodes.push(z))}}return e.parentNode&&pt(e.parentNode)&&mt(e.parentNode)&&(U.isShadow=!0),U.type===ae.Element&&U.tagName==="iframe"&&Xn(e,function(){var le=e.contentDocument;if(le&&A){var tt=ze(le,{doc:le,mirror:n,blockClass:o,blockSelector:r,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:b,maskTextFn:m,maskInputFn:w,slimDOMOptions:S,dataURLOptions:v,inlineImages:T,recordCanvas:L,preserveWhiteSpace:H,onSerialize:N,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:se,stylesheetLoadTimeout:X,keepIframeSrcFn:B});tt&&A(e,tt)}},_),U.type===ae.Element&&U.tagName==="link"&&U.attributes.rel==="stylesheet"&&$n(e,function(){if(se){var le=ze(e,{doc:i,mirror:n,blockClass:o,blockSelector:r,maskTextClass:a,maskTextSelector:s,skipChild:!1,inlineStylesheet:u,maskInputOptions:b,maskTextFn:m,maskInputFn:w,slimDOMOptions:S,dataURLOptions:v,inlineImages:T,recordCanvas:L,preserveWhiteSpace:H,onSerialize:N,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:se,stylesheetLoadTimeout:X,keepIframeSrcFn:B});le&&se(e,le)}},X),U}function ro(e,t){var i=t||{},n=i.mirror,o=n===void 0?new Xi:n,r=i.blockClass,a=r===void 0?"rr-block":r,s=i.blockSelector,c=s===void 0?null:s,d=i.maskTextClass,l=d===void 0?"rr-mask":d,u=i.maskTextSelector,C=u===void 0?null:u,b=i.inlineStylesheet,m=b===void 0?!0:b,w=i.inlineImages,S=w===void 0?!1:w,k=i.recordCanvas,v=k===void 0?!1:k,y=i.maskAllInputs,T=y===void 0?!1:y,W=i.maskTextFn,L=i.maskInputFn,N=i.slimDOM,A=N===void 0?!1:N,Q=i.dataURLOptions,_=i.preserveWhiteSpace,se=i.onSerialize,G=i.onIframeLoad,X=i.iframeLoadTimeout,F=i.onStylesheetLoad,B=i.stylesheetLoadTimeout,Y=i.keepIframeSrcFn,D=Y===void 0?function(){return!1}:Y,j=T===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:T===!1?{password:!0}:T,H=A===!0||A==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:A==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:A===!1?{}:A;return ze(e,{doc:e,mirror:o,blockClass:a,blockSelector:c,maskTextClass:l,maskTextSelector:C,skipChild:!1,inlineStylesheet:m,maskInputOptions:j,maskTextFn:W,maskInputFn:L,slimDOMOptions:H,dataURLOptions:Q,inlineImages:S,recordCanvas:v,preserveWhiteSpace:_,onSerialize:se,onIframeLoad:G,iframeLoadTimeout:X,onStylesheetLoad:F,stylesheetLoadTimeout:B,keepIframeSrcFn:D,newlyAddedElement:!1})}function he(e,t,i=document){const n={capture:!0,passive:!0};return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}const Ke=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let bi={map:{},getId(){return console.error(Ke),-1},getNode(){return console.error(Ke),null},removeNodeFromMap(){console.error(Ke)},has(){return console.error(Ke),!1},reset(){console.error(Ke)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(bi=new Proxy(bi,{get(e,t,i){return t==="map"&&console.error(Ke),Reflect.get(e,t,i)}}));function It(e,t,i={}){let n=null,o=0;return function(...r){const a=Date.now();!o&&i.leading===!1&&(o=a);const s=t-(a-o),c=this;s<=0||s>t?(n&&(clearTimeout(n),n=null),o=a,e.apply(c,r)):!n&&i.trailing!==!1&&(n=setTimeout(()=>{o=i.leading===!1?0:Date.now(),n=null,e.apply(c,r)},s))}}function Wt(e,t,i,n,o=window){const r=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?i:{set(a){setTimeout(()=>{i.set.call(this,a)},0),r&&r.set&&r.set.call(this,a)}}),()=>Wt(e,t,r||{},!0)}function qe(e,t,i){try{if(!(t in e))return()=>{};const n=e[t],o=i(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}function nn(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function on(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function pe(e,t,i,n){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(Ot(o,t,n))return!0;return!!(i&&(e.matches(i)||n&&o.closest(i)!==null))}function ao(e,t){return t.getId(e)!==-1}function Ut(e,t){return t.getId(e)===ft}function rn(e,t){if(pt(e))return!1;const i=t.getId(e);return t.has(i)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?rn(e.parentNode,t):!0:!0}function an(e){return!!e.changedTouches}function so(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let i=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===i)return!0;while(i=i&&i.parentNode);return!1})}function sn(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function cn(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ln(e){return!!(e!=null&&e.shadowRoot)}class co{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var i;return(i=this.styleIDMap.get(t))!==null&&i!==void 0?i:-1}has(t){return this.styleIDMap.has(t)}add(t,i){if(this.has(t))return this.getId(t);let n;return i===void 0?n=this.id++:n=i,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var E=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(E||{}),O=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(O||{}),ei=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ei||{}),Pe=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Pe||{});function Ci(e){return"__ln"in e}class lo{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let i=this.head;for(let n=0;n<t;n++)i=(i==null?void 0:i.next)||null;return i}addNode(t){const i={value:t,previous:null,next:null};if(t.__ln=i,t.previousSibling&&Ci(t.previousSibling)){const n=t.previousSibling.__ln.next;i.next=n,i.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=i,n&&(n.previous=i)}else if(t.nextSibling&&Ci(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;i.previous=n,i.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=i,n&&(n.next=i)}else this.head&&(this.head.previous=i),i.next=this.head,this.head=i;this.length++}removeNode(t){const i=t.__ln;this.head&&(i.previous?(i.previous.next=i.next,i.next&&(i.next.previous=i.previous)):(this.head=i.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const yi=(e,t)=>`${e}@${t}`;class uo{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],i=new lo,n=s=>{let c=s,d=ft;for(;d===ft;)c=c&&c.nextSibling,d=c&&this.mirror.getId(c);return d},o=s=>{var c,d,l,u;let C=null;((d=(c=s.getRootNode)===null||c===void 0?void 0:c.call(s))===null||d===void 0?void 0:d.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&s.getRootNode().host&&(C=s.getRootNode().host);let b=C;for(;((u=(l=b==null?void 0:b.getRootNode)===null||l===void 0?void 0:l.call(b))===null||u===void 0?void 0:u.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&b.getRootNode().host;)b=b.getRootNode().host;const m=!this.doc.contains(s)&&(!b||!this.doc.contains(b));if(!s.parentNode||m)return;const w=pt(s.parentNode)?this.mirror.getId(C):this.mirror.getId(s.parentNode),S=n(s);if(w===-1||S===-1)return i.addNode(s);const k=ze(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:v=>{sn(v,this.mirror)&&this.iframeManager.addIframe(v),cn(v,this.mirror)&&this.stylesheetManager.trackLinkElement(v),ln(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(v,y)=>{this.iframeManager.attachIframe(v,y),this.shadowDomManager.observeAttachShadow(v)},onStylesheetLoad:(v,y)=>{this.stylesheetManager.attachLinkElement(v,y)}});k&&t.push({parentId:w,nextId:S,node:k})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const s of Array.from(this.movedSet.values()))vi(this.removes,s,this.mirror)&&!this.movedSet.has(s.parentNode)||o(s);for(const s of Array.from(this.addedSet.values()))!wi(this.droppedSet,s)&&!vi(this.removes,s,this.mirror)||wi(this.movedSet,s)?o(s):this.droppedSet.add(s);let r=null;for(;i.length;){let s=null;if(r){const c=this.mirror.getId(r.value.parentNode),d=n(r.value);c!==-1&&d!==-1&&(s=r)}if(!s)for(let c=i.length-1;c>=0;c--){const d=i.get(c);if(d){const l=this.mirror.getId(d.value.parentNode);if(n(d.value)===-1)continue;if(l!==-1){s=d;break}else{const u=d.value;if(u.parentNode&&u.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const C=u.parentNode.host;if(this.mirror.getId(C)!==-1){s=d;break}}}}}if(!s){for(;i.head;)i.removeNode(i.head.value);break}r=s.previous,i.removeNode(s.value),o(s.value)}const a={texts:this.texts.map(s=>({id:this.mirror.getId(s.node),value:s.value})).filter(s=>this.mirror.has(s.id)),attributes:this.attributes.map(s=>({id:this.mirror.getId(s.node),attributes:s.attributes})).filter(s=>this.mirror.has(s.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Ut(t.target,this.mirror))switch(t.type){case"characterData":{const i=t.target.textContent;!pe(t.target,this.blockClass,this.blockSelector,!1)&&i!==t.oldValue&&this.texts.push({value:tn(t.target,this.maskTextClass,this.maskTextSelector)&&i?this.maskTextFn?this.maskTextFn(i):i.replace(/[\S]/g,"*"):i,node:t.target});break}case"attributes":{const i=t.target;let n=t.target.getAttribute(t.attributeName);if(t.attributeName==="value"&&(n=li({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),pe(t.target,this.blockClass,this.blockSelector,!1)||n===t.oldValue)return;let o=this.attributes.find(r=>r.node===t.target);if(i.tagName==="IFRAME"&&t.attributeName==="src"&&!this.keepIframeSrcFn(n))if(!i.contentDocument)t.attributeName="rr_src";else return;if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),t.attributeName==="style"){const r=this.doc.createElement("span");t.oldValue&&r.setAttribute("style",t.oldValue),(o.attributes.style===void 0||o.attributes.style===null)&&(o.attributes.style={});const a=o.attributes.style;for(const s of Array.from(i.style)){const c=i.style.getPropertyValue(s),d=i.style.getPropertyPriority(s);(c!==r.style.getPropertyValue(s)||d!==r.style.getPropertyPriority(s))&&(d===""?a[s]=c:a[s]=[c,d])}for(const s of Array.from(r.style))i.style.getPropertyValue(s)===""&&(a[s]=!1)}else o.attributes[t.attributeName]=en(this.doc,i.tagName,t.attributeName,n);break}case"childList":{if(pe(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(i=>this.genAdds(i,t.target)),t.removedNodes.forEach(i=>{const n=this.mirror.getId(i),o=pt(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);pe(t.target,this.blockClass,this.blockSelector,!1)||Ut(i,this.mirror)||!ao(i,this.mirror)||(this.addedSet.has(i)?(ti(this.addedSet,i),this.droppedSet.add(i)):this.addedSet.has(t.target)&&n===-1||rn(t.target,this.mirror)||(this.movedSet.has(i)&&this.movedMap[yi(n,o)]?ti(this.movedSet,i):this.removes.push({parentId:o,id:n,isShadow:pt(t.target)&&mt(t.target)?!0:void 0})),this.mapRemoves.push(i))});break}}},this.genAdds=(t,i)=>{if(this.mirror.hasNode(t)){if(Ut(t,this.mirror))return;this.movedSet.add(t);let n=null;i&&this.mirror.hasNode(i)&&(n=this.mirror.getId(i)),n&&n!==-1&&(this.movedMap[yi(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);pe(t,this.blockClass,this.blockSelector,!1)||t.childNodes.forEach(n=>this.genAdds(n))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(i=>{this[i]=t[i]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ti(e,t){e.delete(t),t.childNodes.forEach(i=>ti(e,i))}function vi(e,t,i){return e.length===0?!1:dn(e,t,i)}function dn(e,t,i){const{parentNode:n}=t;if(!n)return!1;const o=i.getId(n);return e.some(r=>r.id===o)?!0:dn(e,n,i)}function wi(e,t){return e.size===0?!1:un(e,t)}function un(e,t){const{parentNode:i}=t;return i?e.has(i)?!0:un(e,i):!1}const _e=[],hn=typeof CSSGroupingRule<"u",pn=typeof CSSMediaRule<"u",mn=typeof CSSSupportsRule<"u",gn=typeof CSSConditionRule<"u";function vt(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch{return e.target}}function fn(e,t){var i,n;const o=new uo;_e.push(o),o.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const a=(n=(i=window==null?void 0:window.Zone)===null||i===void 0?void 0:i.__symbol__)===null||n===void 0?void 0:n.call(i,"MutationObserver");a&&window[a]&&(r=window[a]);const s=new r(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function ho({mousemoveCb:e,sampling:t,doc:i,mirror:n}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,r=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let a=[],s;const c=It(u=>{const C=Date.now()-s;e(a.map(b=>(b.timeOffset-=C,b)),u),a=[],s=null},r),d=It(u=>{const C=vt(u),{clientX:b,clientY:m}=an(u)?u.changedTouches[0]:u;s||(s=Date.now()),a.push({x:b,y:m,id:n.getId(C),timeOffset:Date.now()-s}),c(typeof DragEvent<"u"&&u instanceof DragEvent?O.Drag:u instanceof MouseEvent?O.MouseMove:O.TouchMove)},o,{trailing:!1}),l=[he("mousemove",d,i),he("touchmove",d,i),he("drag",d,i)];return()=>{l.forEach(u=>u())}}function po({mouseInteractionCb:e,doc:t,mirror:i,blockClass:n,blockSelector:o,sampling:r}){if(r.mouseInteraction===!1)return()=>{};const a=r.mouseInteraction===!0||r.mouseInteraction===void 0?{}:r.mouseInteraction,s=[],c=d=>l=>{const u=vt(l);if(pe(u,n,o,!0))return;const C=an(l)?l.changedTouches[0]:l;if(!C)return;const b=i.getId(u),{clientX:m,clientY:w}=C;e({type:ei[d],id:b,x:m,y:w})};return Object.keys(ei).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{const l=d.toLowerCase(),u=c(d);s.push(he(l,u,t))}),()=>{s.forEach(d=>d())}}function In({scrollCb:e,doc:t,mirror:i,blockClass:n,blockSelector:o,sampling:r}){const a=It(s=>{const c=vt(s);if(!c||pe(c,n,o,!0))return;const d=i.getId(c);if(c===t){const l=t.scrollingElement||t.documentElement;e({id:d,x:l.scrollLeft,y:l.scrollTop})}else e({id:d,x:c.scrollLeft,y:c.scrollTop})},r.scroll||100);return he("scroll",a,t)}function mo({viewportResizeCb:e}){let t=-1,i=-1;const n=It(()=>{const o=nn(),r=on();(t!==o||i!==r)&&(e({width:Number(r),height:Number(o)}),t=o,i=r)},200);return he("resize",n,window)}function Si(e,t){const i=Object.assign({},e);return t||delete i.userTriggered,i}const go=["INPUT","TEXTAREA","SELECT"],ki=new WeakMap;function fo({inputCb:e,doc:t,mirror:i,blockClass:n,blockSelector:o,ignoreClass:r,maskInputOptions:a,maskInputFn:s,sampling:c,userTriggeredOnInput:d}){function l(S){let k=vt(S);const v=S.isTrusted;if(k&&k.tagName==="OPTION"&&(k=k.parentElement),!k||!k.tagName||go.indexOf(k.tagName)<0||pe(k,n,o,!0))return;const y=k.type;if(k.classList.contains(r))return;let T=k.value,W=!1;y==="radio"||y==="checkbox"?W=k.checked:(a[k.tagName.toLowerCase()]||a[y])&&(T=li({maskInputOptions:a,tagName:k.tagName,type:y,value:T,maskInputFn:s})),u(k,Si({text:T,isChecked:W,userTriggered:v},d));const L=k.name;y==="radio"&&L&&W&&t.querySelectorAll(`input[type="radio"][name="${L}"]`).forEach(N=>{N!==k&&u(N,Si({text:N.value,isChecked:!W,userTriggered:!1},d))})}function u(S,k){const v=ki.get(S);if(!v||v.text!==k.text||v.isChecked!==k.isChecked){ki.set(S,k);const y=i.getId(S);e(Object.assign(Object.assign({},k),{id:y}))}}const C=(c.input==="last"?["change"]:["input","change"]).map(S=>he(S,l,t)),b=t.defaultView;if(!b)return()=>{C.forEach(S=>S())};const m=b.Object.getOwnPropertyDescriptor(b.HTMLInputElement.prototype,"value"),w=[[b.HTMLInputElement.prototype,"value"],[b.HTMLInputElement.prototype,"checked"],[b.HTMLSelectElement.prototype,"value"],[b.HTMLTextAreaElement.prototype,"value"],[b.HTMLSelectElement.prototype,"selectedIndex"],[b.HTMLOptionElement.prototype,"selected"]];return m&&m.set&&C.push(...w.map(S=>Wt(S[0],S[1],{set(){l({target:this})}},!1,b))),()=>{C.forEach(S=>S())}}function Rt(e){const t=[];function i(n,o){if(hn&&n.parentRule instanceof CSSGroupingRule||pn&&n.parentRule instanceof CSSMediaRule||mn&&n.parentRule instanceof CSSSupportsRule||gn&&n.parentRule instanceof CSSConditionRule){const r=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(r)}else if(n.parentStyleSheet){const r=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(r)}return o}return i(e,t)}function Re(e,t,i){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=i.getId(e),{styleId:o,id:n}):{}}function Io({styleSheetRuleCb:e,mirror:t,stylesheetManager:i},{win:n}){const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=function(l,u){const{id:C,styleId:b}=Re(this,t,i.styleMirror);return(C&&C!==-1||b&&b!==-1)&&e({id:C,styleId:b,adds:[{rule:l,index:u}]}),o.apply(this,[l,u])};const r=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=function(l){const{id:u,styleId:C}=Re(this,t,i.styleMirror);return(u&&u!==-1||C&&C!==-1)&&e({id:u,styleId:C,removes:[{index:l}]}),r.apply(this,[l])};let a;n.CSSStyleSheet.prototype.replace&&(a=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=function(l){const{id:u,styleId:C}=Re(this,t,i.styleMirror);return(u&&u!==-1||C&&C!==-1)&&e({id:u,styleId:C,replace:l}),a.apply(this,[l])});let s;n.CSSStyleSheet.prototype.replaceSync&&(s=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=function(l){const{id:u,styleId:C}=Re(this,t,i.styleMirror);return(u&&u!==-1||C&&C!==-1)&&e({id:u,styleId:C,replaceSync:l}),s.apply(this,[l])});const c={};hn?c.CSSGroupingRule=n.CSSGroupingRule:(pn&&(c.CSSMediaRule=n.CSSMediaRule),gn&&(c.CSSConditionRule=n.CSSConditionRule),mn&&(c.CSSSupportsRule=n.CSSSupportsRule));const d={};return Object.entries(c).forEach(([l,u])=>{d[l]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=function(C,b){const{id:m,styleId:w}=Re(this.parentStyleSheet,t,i.styleMirror);return(m&&m!==-1||w&&w!==-1)&&e({id:m,styleId:w,adds:[{rule:C,index:[...Rt(this),b||0]}]}),d[l].insertRule.apply(this,[C,b])},u.prototype.deleteRule=function(C){const{id:b,styleId:m}=Re(this.parentStyleSheet,t,i.styleMirror);return(b&&b!==-1||m&&m!==-1)&&e({id:b,styleId:m,removes:[{index:[...Rt(this),C]}]}),d[l].deleteRule.apply(this,[C])}}),()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=r,a&&(n.CSSStyleSheet.prototype.replace=a),s&&(n.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach(([l,u])=>{u.prototype.insertRule=d[l].insertRule,u.prototype.deleteRule=d[l].deleteRule})}}function bn({mirror:e,stylesheetManager:t},i){var n,o,r;let a=null;i.nodeName==="#document"?a=e.getId(i):a=e.getId(i.host);const s=i.nodeName==="#document"?(n=i.defaultView)===null||n===void 0?void 0:n.Document:(r=(o=i.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||r===void 0?void 0:r.ShadowRoot,c=Object.getOwnPropertyDescriptor(s==null?void 0:s.prototype,"adoptedStyleSheets");return a===null||a===-1||!s||!c?()=>{}:(Object.defineProperty(i,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var d;return(d=c.get)===null||d===void 0?void 0:d.call(this)},set(d){var l;const u=(l=c.set)===null||l===void 0?void 0:l.call(this,d);if(a!==null&&a!==-1)try{t.adoptStyleSheets(d,a)}catch{}return u}}),()=>{Object.defineProperty(i,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})})}function bo({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:i,stylesheetManager:n},{win:o}){const r=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(s,c,d){var l;if(i.has(s))return r.apply(this,[s,c,d]);const{id:u,styleId:C}=Re((l=this.parentRule)===null||l===void 0?void 0:l.parentStyleSheet,t,n.styleMirror);return(u&&u!==-1||C&&C!==-1)&&e({id:u,styleId:C,set:{property:s,value:c,priority:d},index:Rt(this.parentRule)}),r.apply(this,[s,c,d])};const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(s){var c;if(i.has(s))return a.apply(this,[s]);const{id:d,styleId:l}=Re((c=this.parentRule)===null||c===void 0?void 0:c.parentStyleSheet,t,n.styleMirror);return(d&&d!==-1||l&&l!==-1)&&e({id:d,styleId:l,remove:{property:s},index:Rt(this.parentRule)}),a.apply(this,[s])},()=>{o.CSSStyleDeclaration.prototype.setProperty=r,o.CSSStyleDeclaration.prototype.removeProperty=a}}function Co({mediaInteractionCb:e,blockClass:t,blockSelector:i,mirror:n,sampling:o}){const r=s=>It(c=>{const d=vt(c);if(!d||pe(d,t,i,!0))return;const{currentTime:l,volume:u,muted:C,playbackRate:b}=d;e({type:s,id:n.getId(d),currentTime:l,volume:u,muted:C,playbackRate:b})},o.media||500),a=[he("play",r(0)),he("pause",r(1)),he("seeked",r(2)),he("volumechange",r(3)),he("ratechange",r(4))];return()=>{a.forEach(s=>s())}}function yo({fontCb:e,doc:t}){const i=t.defaultView;if(!i)return()=>{};const n=[],o=new WeakMap,r=i.FontFace;i.FontFace=function(s,c,d){const l=new r(s,c,d);return o.set(l,{family:s,buffer:typeof c!="string",descriptors:d,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),l};const a=qe(t.fonts,"add",function(s){return function(c){return setTimeout(()=>{const d=o.get(c);d&&(e(d),o.delete(c))},0),s.apply(this,[c])}});return n.push(()=>{i.FontFace=r}),n.push(a),()=>{n.forEach(s=>s())}}function vo(e){const{doc:t,mirror:i,blockClass:n,blockSelector:o,selectionCb:r}=e;let a=!0;const s=()=>{const c=t.getSelection();if(!c||a&&c!=null&&c.isCollapsed)return;a=c.isCollapsed||!1;const d=[],l=c.rangeCount||0;for(let u=0;u<l;u++){const C=c.getRangeAt(u),{startContainer:b,startOffset:m,endContainer:w,endOffset:S}=C;pe(b,n,o,!0)||pe(w,n,o,!0)||d.push({start:i.getId(b),startOffset:m,end:i.getId(w),endOffset:S})}r({ranges:d})};return s(),he("selectionchange",s)}function wo(e,t){const{mutationCb:i,mousemoveCb:n,mouseInteractionCb:o,scrollCb:r,viewportResizeCb:a,inputCb:s,mediaInteractionCb:c,styleSheetRuleCb:d,styleDeclarationCb:l,canvasMutationCb:u,fontCb:C,selectionCb:b}=e;e.mutationCb=(...m)=>{t.mutation&&t.mutation(...m),i(...m)},e.mousemoveCb=(...m)=>{t.mousemove&&t.mousemove(...m),n(...m)},e.mouseInteractionCb=(...m)=>{t.mouseInteraction&&t.mouseInteraction(...m),o(...m)},e.scrollCb=(...m)=>{t.scroll&&t.scroll(...m),r(...m)},e.viewportResizeCb=(...m)=>{t.viewportResize&&t.viewportResize(...m),a(...m)},e.inputCb=(...m)=>{t.input&&t.input(...m),s(...m)},e.mediaInteractionCb=(...m)=>{t.mediaInteaction&&t.mediaInteaction(...m),c(...m)},e.styleSheetRuleCb=(...m)=>{t.styleSheetRule&&t.styleSheetRule(...m),d(...m)},e.styleDeclarationCb=(...m)=>{t.styleDeclaration&&t.styleDeclaration(...m),l(...m)},e.canvasMutationCb=(...m)=>{t.canvasMutation&&t.canvasMutation(...m),u(...m)},e.fontCb=(...m)=>{t.font&&t.font(...m),C(...m)},e.selectionCb=(...m)=>{t.selection&&t.selection(...m),b(...m)}}function So(e,t={}){const i=e.doc.defaultView;if(!i)return()=>{};wo(e,t);const n=fn(e,e.doc),o=ho(e),r=po(e),a=In(e),s=mo(e),c=fo(e),d=Co(e),l=Io(e,{win:i}),u=bn(e,e.doc),C=bo(e,{win:i}),b=e.collectFonts?yo(e):()=>{},m=vo(e),w=[];for(const S of e.plugins)w.push(S.observer(S.callback,i,S.options));return()=>{_e.forEach(S=>S.reset()),n.disconnect(),o(),r(),a(),s(),c(),d(),l(),u(),C(),b(),m(),w.forEach(S=>S())}}class Ai{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,i,n,o){const r=n||this.getIdToRemoteIdMap(t),a=o||this.getRemoteIdToIdMap(t);let s=r.get(i);return s||(s=this.generateIdFn(),r.set(i,s),a.set(s,i)),s}getIds(t,i){const n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return i.map(r=>this.getId(t,r,n,o))}getRemoteId(t,i,n){const o=n||this.getRemoteIdToIdMap(t);return typeof i!="number"?i:o.get(i)||-1}getRemoteIds(t,i){const n=this.getRemoteIdToIdMap(t);return i.map(o=>this.getRemoteId(t,o,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let i=this.iframeIdToRemoteIdMap.get(t);return i||(i=new Map,this.iframeIdToRemoteIdMap.set(t,i)),i}getRemoteIdToIdMap(t){let i=this.iframeRemoteIdToIdMap.get(t);return i||(i=new Map,this.iframeRemoteIdToIdMap.set(t,i)),i}}class ko{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Ai($i),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ai(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,i){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:i}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){if(t.data.type==="rrweb"){if(!t.source)return;const i=this.crossOriginIframeMap.get(t.source);if(!i)return;const n=this.transformCrossOriginEvent(i,t.data.event);n&&this.wrappedEmit(n,t.data.isCheckout)}}transformCrossOriginEvent(t,i){var n;switch(i.type){case E.FullSnapshot:return this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(i.data.node,t),{timestamp:i.timestamp,type:E.IncrementalSnapshot,data:{source:O.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:i.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case E.Meta:case E.Load:case E.DomContentLoaded:return!1;case E.Plugin:return i;case E.Custom:return this.replaceIds(i.data.payload,t,["id","parentId","previousId","nextId"]),i;case E.IncrementalSnapshot:switch(i.data.source){case O.Mutation:return i.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t)}),i.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),i.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),i.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),i;case O.Drag:case O.TouchMove:case O.MouseMove:return i.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),i;case O.ViewportResize:return!1;case O.MediaInteraction:case O.MouseInteraction:case O.Scroll:case O.CanvasMutation:case O.Input:return this.replaceIds(i.data,t,["id"]),i;case O.StyleSheetRule:case O.StyleDeclaration:return this.replaceIds(i.data,t,["id"]),this.replaceStyleIds(i.data,t,["styleId"]),i;case O.Font:return i;case O.Selection:return i.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),i;case O.AdoptedStyleSheet:return this.replaceIds(i.data,t,["id"]),this.replaceStyleIds(i.data,t,["styleIds"]),(n=i.data.styles)===null||n===void 0||n.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),i}}}replace(t,i,n,o){for(const r of o)!Array.isArray(i[r])&&typeof i[r]!="number"||(Array.isArray(i[r])?i[r]=t.getIds(n,i[r]):i[r]=t.getId(n,i[r]));return i}replaceIds(t,i,n){return this.replace(this.crossOriginIframeMirror,t,i,n)}replaceStyleIds(t,i,n){return this.replace(this.crossOriginIframeStyleMirror,t,i,n)}replaceIdOnNode(t,i){this.replaceIds(t,i,["id"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,i)})}}class Ao{constructor(t){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const i=this;this.restorePatches.push(qe(Element.prototype,"attachShadow",function(n){return function(o){const r=n.call(this,o);return this.shadowRoot&&i.addShadowRoot(this.shadowRoot,this.ownerDocument),r}}))}addShadowRoot(t,i){mt(t)&&(this.shadowDoms.has(t)||(this.shadowDoms.add(t),fn(Object.assign(Object.assign({},this.bypassOptions),{doc:i,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),In(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),bn({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t)},0)))}observeAttachShadow(t){if(t.contentWindow){const i=this;this.restorePatches.push(qe(t.contentWindow.HTMLElement.prototype,"attachShadow",function(n){return function(o){const r=n.call(this,o);return this.shadowRoot&&i.addShadowRoot(this.shadowRoot,t.contentDocument),r}}))}}reset(){this.restorePatches.forEach(t=>t()),this.shadowDoms=new WeakSet}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Mo(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]]);return i}function xo(e,t,i,n){function o(r){return r instanceof i?r:new i(function(a){a(r)})}return new(i||(i=Promise))(function(r,a){function s(l){try{d(n.next(l))}catch(u){a(u)}}function c(l){try{d(n.throw(l))}catch(u){a(u)}}function d(l){l.done?r(l.value):o(l.value).then(s,c)}d((n=n.apply(e,[])).next())})}var He="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",To=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wt=0;wt<He.length;wt++)To[He.charCodeAt(wt)]=wt;var No=function(e){var t=new Uint8Array(e),i,n=t.length,o="";for(i=0;i<n;i+=3)o+=He[t[i]>>2],o+=He[(t[i]&3)<<4|t[i+1]>>4],o+=He[(t[i+1]&15)<<2|t[i+2]>>6],o+=He[t[i+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const Mi=new Map;function Oo(e,t){let i=Mi.get(e);return i||(i=new Map,Mi.set(e,i)),i.has(t)||i.set(t,[]),i.get(t)}const Cn=(e,t,i)=>{if(!e||!(vn(e,t)||typeof e=="object"))return;const n=e.constructor.name,o=Oo(i,n);let r=o.indexOf(e);return r===-1&&(r=o.length,o.push(e)),r};function Mt(e,t,i){if(e instanceof Array)return e.map(n=>Mt(n,t,i));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const n=e.constructor.name,o=No(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Mt(e.buffer,t,i),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){const n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Mt(e.data,t,i),e.width,e.height]};if(vn(e,t)||typeof e=="object"){const n=e.constructor.name,o=Cn(e,t,i);return{rr_type:n,index:o}}}}return e}const yn=(e,t,i)=>[...e].map(n=>Mt(n,t,i)),vn=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof t[i]=="function").find(i=>e instanceof t[i]);function Ro(e,t,i,n){const o=[],r=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of r)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const s=qe(t.CanvasRenderingContext2D.prototype,a,function(c){return function(...d){return pe(this.canvas,i,n,!0)||setTimeout(()=>{const l=yn([...d],t,this);e(this.canvas,{type:Pe["2D"],property:a,args:l})},0),c.apply(this,d)}});o.push(s)}catch{const s=Wt(t.CanvasRenderingContext2D.prototype,a,{set(c){e(this.canvas,{type:Pe["2D"],property:a,args:[c],setter:!0})}});o.push(s)}return()=>{o.forEach(a=>a())}}function xi(e,t,i){const n=[];try{const o=qe(e.HTMLCanvasElement.prototype,"getContext",function(r){return function(a,...s){return pe(this,t,i,!0)||"__context"in this||(this.__context=a),r.apply(this,[a,...s])}});n.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach(o=>o())}}function Ti(e,t,i,n,o,r,a){const s=[],c=Object.getOwnPropertyNames(e);for(const d of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=qe(e,d,function(u){return function(...C){const b=u.apply(this,C);if(Cn(b,a,this),!pe(this.canvas,n,o,!0)){const m=yn([...C],a,this),w={type:t,property:d,args:m};i(this.canvas,w)}return b}});s.push(l)}catch{const l=Wt(e,d,{set(u){i(this.canvas,{type:t,property:d,args:[u],setter:!0})}});s.push(l)}return s}function Eo(e,t,i,n,o){const r=[];return r.push(...Ti(t.WebGLRenderingContext.prototype,Pe.WebGL,e,i,n,o,t)),typeof t.WebGL2RenderingContext<"u"&&r.push(...Ti(t.WebGL2RenderingContext.prototype,Pe.WebGL2,e,i,n,o,t)),()=>{r.forEach(a=>a())}}var wn=null;try{var Fo=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof require=="function"&&require("worker_threads");wn=Fo.Worker}catch{}function Lo(e,t){return Buffer.from(e,"base64").toString("utf8")}function Do(e,t,i){var n=Lo(e),o=n.indexOf(`
`,10)+1,r=n.substring(o)+"";return function(a){return new wn(r,Object.assign({},a,{eval:!0}))}}function Wo(e,t){var i=atob(e);return i}function Vo(e,t,i){var n=Wo(e),o=n.indexOf(`
`,10)+1,r=n.substring(o)+"",a=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(a)}function _o(e,t,i){var n;return function(o){return n=n||Vo(e),new Worker(n,o)}}var Go=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function Uo(){return Go}function Zo(e,t,i){return Uo()?Do(e):_o(e)}var Bo=Zo("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=");class Ko{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(c,d)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(c)||this.pendingCanvasMutations.set(c,[]),this.pendingCanvasMutations.get(c).push(d)};const{sampling:i="all",win:n,blockClass:o,blockSelector:r,recordCanvas:a,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,a&&i==="all"&&this.initCanvasMutationObserver(n,o,r),a&&typeof i=="number"&&this.initCanvasFPSObserver(i,n,o,r,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,i,n,o,r){const a=xi(i,n,o),s=new Map,c=new Bo;c.onmessage=m=>{const{id:w}=m.data;if(s.set(w,!1),!("base64"in m.data))return;const{base64:S,type:k,width:v,height:y}=m.data;this.mutationCb({id:w,type:Pe["2D"],commands:[{property:"clearRect",args:[0,0,v,y]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:S}],type:k}]},0,0]}]})};const d=1e3/t;let l=0,u;const C=()=>{const m=[];return i.document.querySelectorAll("canvas").forEach(w=>{pe(w,n,o,!0)||m.push(w)}),m},b=m=>{if(l&&m-l<d){u=requestAnimationFrame(b);return}l=m,C().forEach(w=>xo(this,void 0,void 0,function*(){var S;const k=this.mirror.getId(w);if(s.get(k))return;if(s.set(k,!0),["webgl","webgl2"].includes(w.__context)){const y=w.getContext(w.__context);((S=y==null?void 0:y.getContextAttributes())===null||S===void 0?void 0:S.preserveDrawingBuffer)===!1&&(y==null||y.clear(y.COLOR_BUFFER_BIT))}const v=yield createImageBitmap(w);c.postMessage({id:k,bitmap:v,width:w.width,height:w.height,dataURLOptions:r.dataURLOptions},[v])})),u=requestAnimationFrame(b)};u=requestAnimationFrame(b),this.resetObservers=()=>{a(),cancelAnimationFrame(u)}}initCanvasMutationObserver(t,i,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=xi(t,i,n),r=Ro(this.processMutation.bind(this),t,i,n),a=Eo(this.processMutation.bind(this),t,i,n,this.mirror);this.resetObservers=()=>{o(),r(),a()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=i=>{this.rafStamps.latestId=i,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,i)=>{const n=this.mirror.getId(i);this.flushPendingCanvasMutationFor(i,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,i){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||i===-1)return;const o=n.map(a=>Mo(a,["type"])),{type:r}=n[0];this.mutationCb({id:i,type:r,commands:o}),this.pendingCanvasMutations.delete(t)}}class zo{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new co,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,i){"_cssText"in i.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:i.id,attributes:i.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,i){if(t.length===0)return;const n={id:i,styleIds:[]},o=[];for(const r of t){let a;if(this.styleMirror.has(r))a=this.styleMirror.getId(r);else{a=this.styleMirror.add(r);const s=Array.from(r.rules||CSSRule);o.push({styleId:a,rules:s.map((c,d)=>({rule:Ji(c),index:d}))})}n.styleIds.push(a)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}function te(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let P,xt,Zt,Et=!1;const ye=Vn();function Qe(e={}){const{emit:t,checkoutEveryNms:i,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:r=null,ignoreClass:a="rr-ignore",maskTextClass:s="rr-mask",maskTextSelector:c=null,inlineStylesheet:d=!0,maskAllInputs:l,maskInputOptions:u,slimDOMOptions:C,maskInputFn:b,maskTextFn:m,hooks:w,packFn:S,sampling:k={},dataURLOptions:v={},mousemoveWait:y,recordCanvas:T=!1,recordCrossOriginIframes:W=!1,userTriggeredOnInput:L=!1,collectFonts:N=!1,inlineImages:A=!1,plugins:Q,keepIframeSrcFn:_=()=>!1,ignoreCSSAttributes:se=new Set([])}=e,G=W?window.parent===window:!0;let X=!1;if(!G)try{window.parent.document,X=!1}catch{X=!0}if(G&&!t)throw new Error("emit function is required");y!==void 0&&k.mousemove===void 0&&(k.mousemove=y),ye.reset();const F=l===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:u!==void 0?u:{password:!0},B=C===!0||C==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:C==="all",headMetaDescKeywords:C==="all"}:C||{};so();let Y,D=0;const j=M=>{for(const ne of Q||[])ne.eventProcessor&&(M=ne.eventProcessor(M));return S&&(M=S(M)),M};P=(M,ne)=>{var oe;if(!((oe=_e[0])===null||oe===void 0)&&oe.isFrozen()&&M.type!==E.FullSnapshot&&!(M.type===E.IncrementalSnapshot&&M.data.source===O.Mutation)&&_e.forEach(z=>z.unfreeze()),G)t==null||t(j(M),ne);else if(X){const z={type:"rrweb",event:j(M),isCheckout:ne};window.parent.postMessage(z,"*")}if(M.type===E.FullSnapshot)Y=M,D=0;else if(M.type===E.IncrementalSnapshot){if(M.data.source===O.Mutation&&M.data.isAttachIframe)return;D++;const z=n&&D>=n,de=i&&M.timestamp-Y.timestamp>i;(z||de)&&xt(!0)}};const H=M=>{P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.Mutation},M)}))},ce=M=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.Scroll},M)})),$=M=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.CanvasMutation},M)})),U=M=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.AdoptedStyleSheet},M)})),ie=new zo({mutationCb:H,adoptedStyleSheetCb:U}),q=new ko({mirror:ye,mutationCb:H,stylesheetManager:ie,recordCrossOriginIframes:W,wrappedEmit:P});for(const M of Q||[])M.getMirror&&M.getMirror({nodeMirror:ye,crossOriginIframeMirror:q.crossOriginIframeMirror,crossOriginIframeStyleMirror:q.crossOriginIframeStyleMirror});Zt=new Ko({recordCanvas:T,mutationCb:$,win:window,blockClass:o,blockSelector:r,mirror:ye,sampling:k.canvas,dataURLOptions:v});const J=new Ao({mutationCb:H,scrollCb:ce,bypassOptions:{blockClass:o,blockSelector:r,maskTextClass:s,maskTextSelector:c,inlineStylesheet:d,maskInputOptions:F,dataURLOptions:v,maskTextFn:m,maskInputFn:b,recordCanvas:T,inlineImages:A,sampling:k,slimDOMOptions:B,iframeManager:q,stylesheetManager:ie,canvasManager:Zt,keepIframeSrcFn:_},mirror:ye});xt=(M=!1)=>{var ne,oe,z,de,R,le;P(te({type:E.Meta,data:{href:window.location.href,width:on(),height:nn()}}),M),ie.reset(),_e.forEach(ee=>ee.lock());const tt=ro(document,{mirror:ye,blockClass:o,blockSelector:r,maskTextClass:s,maskTextSelector:c,inlineStylesheet:d,maskAllInputs:F,maskTextFn:m,slimDOM:B,dataURLOptions:v,recordCanvas:T,inlineImages:A,onSerialize:ee=>{sn(ee,ye)&&q.addIframe(ee),cn(ee,ye)&&ie.trackLinkElement(ee),ln(ee)&&J.addShadowRoot(ee.shadowRoot,document)},onIframeLoad:(ee,Gt)=>{q.attachIframe(ee,Gt),J.observeAttachShadow(ee)},onStylesheetLoad:(ee,Gt)=>{ie.attachLinkElement(ee,Gt)},keepIframeSrcFn:_});if(!tt)return console.warn("Failed to snapshot the document");P(te({type:E.FullSnapshot,data:{node:tt,initialOffset:{left:window.pageXOffset!==void 0?window.pageXOffset:(document==null?void 0:document.documentElement.scrollLeft)||((oe=(ne=document==null?void 0:document.body)===null||ne===void 0?void 0:ne.parentElement)===null||oe===void 0?void 0:oe.scrollLeft)||((z=document==null?void 0:document.body)===null||z===void 0?void 0:z.scrollLeft)||0,top:window.pageYOffset!==void 0?window.pageYOffset:(document==null?void 0:document.documentElement.scrollTop)||((R=(de=document==null?void 0:document.body)===null||de===void 0?void 0:de.parentElement)===null||R===void 0?void 0:R.scrollTop)||((le=document==null?void 0:document.body)===null||le===void 0?void 0:le.scrollTop)||0}}})),_e.forEach(ee=>ee.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ie.adoptStyleSheets(document.adoptedStyleSheets,ye.getId(document))};try{const M=[];M.push(he("DOMContentLoaded",()=>{P(te({type:E.DomContentLoaded,data:{}}))}));const ne=z=>{var de;return So({mutationCb:H,mousemoveCb:(R,le)=>P(te({type:E.IncrementalSnapshot,data:{source:le,positions:R}})),mouseInteractionCb:R=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.MouseInteraction},R)})),scrollCb:ce,viewportResizeCb:R=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.ViewportResize},R)})),inputCb:R=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.Input},R)})),mediaInteractionCb:R=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.MediaInteraction},R)})),styleSheetRuleCb:R=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.StyleSheetRule},R)})),styleDeclarationCb:R=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.StyleDeclaration},R)})),canvasMutationCb:$,fontCb:R=>P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.Font},R)})),selectionCb:R=>{P(te({type:E.IncrementalSnapshot,data:Object.assign({source:O.Selection},R)}))},blockClass:o,ignoreClass:a,maskTextClass:s,maskTextSelector:c,maskInputOptions:F,inlineStylesheet:d,sampling:k,recordCanvas:T,inlineImages:A,userTriggeredOnInput:L,collectFonts:N,doc:z,maskInputFn:b,maskTextFn:m,keepIframeSrcFn:_,blockSelector:r,slimDOMOptions:B,dataURLOptions:v,mirror:ye,iframeManager:q,stylesheetManager:ie,shadowDomManager:J,canvasManager:Zt,ignoreCSSAttributes:se,plugins:((de=Q==null?void 0:Q.filter(R=>R.observer))===null||de===void 0?void 0:de.map(R=>({observer:R.observer,options:R.options,callback:le=>P(te({type:E.Plugin,data:{plugin:R.name,payload:le}}))})))||[]},w)};q.addLoadListener(z=>{M.push(ne(z.contentDocument))});const oe=()=>{xt(),M.push(ne(document)),Et=!0};return document.readyState==="interactive"||document.readyState==="complete"?oe():M.push(he("load",()=>{P(te({type:E.Load,data:{}})),oe()},window)),()=>{M.forEach(z=>z()),Et=!1}}catch(M){console.warn(M)}}Qe.addCustomEvent=(e,t)=>{if(!Et)throw new Error("please add custom event after start recording");P(te({type:E.Custom,data:{tag:e,payload:t}}))};Qe.freezePage=()=>{_e.forEach(e=>e.freeze())};Qe.takeFullSnapshot=e=>{if(!Et)throw new Error("please take full snapshot after start recording");xt(e)};Qe.mirror=ye;var Ce=Uint8Array,Ie=Uint16Array,bt=Uint32Array,ui=new Ce([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hi=new Ce([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ni=new Ce([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sn=function(e,t){for(var i=new Ie(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];for(var o=new bt(i[30]),n=1;n<30;++n)for(var r=i[n];r<i[n+1];++r)o[r]=r-i[n]<<5|n;return[i,o]},kn=Sn(ui,2),Ho=kn[0],ii=kn[1];Ho[28]=258,ii[258]=28;var Yo=Sn(hi,0),Oi=Yo[1],An=new Ie(32768);for(var K=0;K<32768;++K){var Ne=(K&43690)>>>1|(K&21845)<<1;Ne=(Ne&52428)>>>2|(Ne&13107)<<2,Ne=(Ne&61680)>>>4|(Ne&3855)<<4,An[K]=((Ne&65280)>>>8|(Ne&255)<<8)>>>1}var gt=function(e,t,i){for(var n=e.length,o=0,r=new Ie(t);o<n;++o)++r[e[o]-1];var a=new Ie(t);for(o=0;o<t;++o)a[o]=a[o-1]+r[o-1]<<1;var s;for(s=new Ie(n),o=0;o<n;++o)s[o]=An[a[e[o]-1]++]>>>15-e[o];return s},Ge=new Ce(288);for(var K=0;K<144;++K)Ge[K]=8;for(var K=144;K<256;++K)Ge[K]=9;for(var K=256;K<280;++K)Ge[K]=7;for(var K=280;K<288;++K)Ge[K]=8;var Ft=new Ce(32);for(var K=0;K<32;++K)Ft[K]=5;var jo=gt(Ge,9),qo=gt(Ft,5),Mn=function(e){return(e/8>>0)+(e&7&&1)},xn=function(e,t,i){(i==null||i>e.length)&&(i=e.length);var n=new(e instanceof Ie?Ie:e instanceof bt?bt:Ce)(i-t);return n.set(e.subarray(t,i)),n},ke=function(e,t,i){i<<=t&7;var n=t/8>>0;e[n]|=i,e[n+1]|=i>>>8},it=function(e,t,i){i<<=t&7;var n=t/8>>0;e[n]|=i,e[n+1]|=i>>>8,e[n+2]|=i>>>16},Bt=function(e,t){for(var i=[],n=0;n<e.length;++n)e[n]&&i.push({s:n,f:e[n]});var o=i.length,r=i.slice();if(!o)return[new Ce(0),0];if(o==1){var a=new Ce(i[0].s+1);return a[i[0].s]=1,[a,1]}i.sort(function(W,L){return W.f-L.f}),i.push({s:-1,f:25001});var s=i[0],c=i[1],d=0,l=1,u=2;for(i[0]={s:-1,f:s.f+c.f,l:s,r:c};l!=o-1;)s=i[i[d].f<i[u].f?d++:u++],c=i[d!=l&&i[d].f<i[u].f?d++:u++],i[l++]={s:-1,f:s.f+c.f,l:s,r:c};for(var C=r[0].s,n=1;n<o;++n)r[n].s>C&&(C=r[n].s);var b=new Ie(C+1),m=ni(i[l-1],b,0);if(m>t){var n=0,w=0,S=m-t,k=1<<S;for(r.sort(function(L,N){return b[N.s]-b[L.s]||L.f-N.f});n<o;++n){var v=r[n].s;if(b[v]>t)w+=k-(1<<m-b[v]),b[v]=t;else break}for(w>>>=S;w>0;){var y=r[n].s;b[y]<t?w-=1<<t-b[y]++-1:++n}for(;n>=0&&w;--n){var T=r[n].s;b[T]==t&&(--b[T],++w)}m=t}return[new Ce(b),m]},ni=function(e,t,i){return e.s==-1?Math.max(ni(e.l,t,i+1),ni(e.r,t,i+1)):t[e.s]=i},Ri=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new Ie(++t),n=0,o=e[0],r=1,a=function(c){i[n++]=c},s=1;s<=t;++s)if(e[s]==o&&s!=t)++r;else{if(!o&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(o),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(o);r=1,o=e[s]}return[i.subarray(0,n),t]},nt=function(e,t){for(var i=0,n=0;n<t.length;++n)i+=e[n]*t[n];return i},oi=function(e,t,i){var n=i.length,o=Mn(t+2);e[o]=n&255,e[o+1]=n>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var r=0;r<n;++r)e[o+r+4]=i[r];return(o+4+n)*8},Ei=function(e,t,i,n,o,r,a,s,c,d,l){ke(t,l++,i),++o[256];for(var u=Bt(o,15),C=u[0],b=u[1],m=Bt(r,15),w=m[0],S=m[1],k=Ri(C),v=k[0],y=k[1],T=Ri(w),W=T[0],L=T[1],N=new Ie(19),A=0;A<v.length;++A)N[v[A]&31]++;for(var A=0;A<W.length;++A)N[W[A]&31]++;for(var Q=Bt(N,7),_=Q[0],se=Q[1],G=19;G>4&&!_[Ni[G-1]];--G);var X=d+5<<3,F=nt(o,Ge)+nt(r,Ft)+a,B=nt(o,C)+nt(r,w)+a+14+3*G+nt(N,_)+(2*N[16]+3*N[17]+7*N[18]);if(X<=F&&X<=B)return oi(t,l,e.subarray(c,c+d));var Y,D,j,H;if(ke(t,l,1+(B<F)),l+=2,B<F){Y=gt(C,b),D=C,j=gt(w,S),H=w;var ce=gt(_,se);ke(t,l,y-257),ke(t,l+5,L-1),ke(t,l+10,G-4),l+=14;for(var A=0;A<G;++A)ke(t,l+3*A,_[Ni[A]]);l+=3*G;for(var $=[v,W],U=0;U<2;++U)for(var ie=$[U],A=0;A<ie.length;++A){var q=ie[A]&31;ke(t,l,ce[q]),l+=_[q],q>15&&(ke(t,l,ie[A]>>>5&127),l+=ie[A]>>>12)}}else Y=jo,D=Ge,j=qo,H=Ft;for(var A=0;A<s;++A)if(n[A]>255){var q=n[A]>>>18&31;it(t,l,Y[q+257]),l+=D[q+257],q>7&&(ke(t,l,n[A]>>>23&31),l+=ui[q]);var J=n[A]&31;it(t,l,j[J]),l+=H[J],J>3&&(it(t,l,n[A]>>>5&8191),l+=hi[J])}else it(t,l,Y[n[A]]),l+=D[n[A]];return it(t,l,Y[256]),l+D[256]},Po=new bt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Qo=function(e,t,i,n,o,r){var a=e.length,s=new Ce(n+a+5*(1+Math.floor(a/7e3))+o),c=s.subarray(n,s.length-o),d=0;if(!t||a<8)for(var l=0;l<=a;l+=65535){var u=l+65535;u<a?d=oi(c,d,e.subarray(l,u)):(c[l]=r,d=oi(c,d,e.subarray(l,a)))}else{for(var C=Po[t-1],b=C>>>13,m=C&8191,w=(1<<i)-1,S=new Ie(32768),k=new Ie(w+1),v=Math.ceil(i/3),y=2*v,T=function(ee){return(e[ee]^e[ee+1]<<v^e[ee+2]<<y)&w},W=new bt(25e3),L=new Ie(288),N=new Ie(32),A=0,Q=0,l=0,_=0,se=0,G=0;l<a;++l){var X=T(l),F=l&32767,B=k[X];if(S[F]=B,k[X]=F,se<=l){var Y=a-l;if((A>7e3||_>24576)&&Y>423){d=Ei(e,c,0,W,L,N,Q,_,G,l-G,d),_=A=Q=0,G=l;for(var D=0;D<286;++D)L[D]=0;for(var D=0;D<30;++D)N[D]=0}var j=2,H=0,ce=m,$=F-B&32767;if(Y>2&&X==T(l-$))for(var U=Math.min(b,Y)-1,ie=Math.min(32767,l),q=Math.min(258,Y);$<=ie&&--ce&&F!=B;){if(e[l+j]==e[l+j-$]){for(var J=0;J<q&&e[l+J]==e[l+J-$];++J);if(J>j){if(j=J,H=$,J>U)break;for(var M=Math.min($,J-2),ne=0,D=0;D<M;++D){var oe=l-$+D+32768&32767,z=S[oe],de=oe-z+32768&32767;de>ne&&(ne=de,B=oe)}}}F=B,B=S[F],$+=F-B+32768&32767}if(H){W[_++]=268435456|ii[j]<<18|Oi[H];var R=ii[j]&31,le=Oi[H]&31;Q+=ui[R]+hi[le],++L[257+R],++N[le],se=l+j,++A}else W[_++]=e[l],++L[e[l]]}}d=Ei(e,c,r,W,L,N,Q,_,G,l-G,d)}return xn(s,0,n+Mn(d)+o)},Jo=function(){var e=1,t=0;return{p:function(i){for(var n=e,o=t,r=i.length,a=0;a!=r;){for(var s=Math.min(a+5552,r);a<s;++a)n+=i[a],o+=n;n%=65521,o%=65521}e=n,t=o},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},Xo=function(e,t,i,n,o){return Qo(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,i,n,!0)},$o=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},er=function(e,t){var i=t.level,n=i==0?0:i<6?1:i==9?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)};function tr(e,t){t===void 0&&(t={});var i=Jo();i.p(e);var n=Xo(e,t,2,4);return er(n,t),$o(n,n.length-4,i.d()),n}function ir(e,t){var i=e.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(e);for(var n=new Ce(e.length+(e.length>>>1)),o=0,r=function(d){n[o++]=d},a=0;a<i;++a){if(o+5>n.length){var s=new Ce(o+8+(i-a<<1));s.set(n),n=s}var c=e.charCodeAt(a);c<128||t?r(c):c<2048?(r(192|c>>>6),r(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++a)&1023,r(240|c>>>18),r(128|c>>>12&63),r(128|c>>>6&63),r(128|c&63)):(r(224|c>>>12),r(128|c>>>6&63),r(128|c&63))}return xn(n,0,o)}function nr(e,t){for(var i="",n=0;n<e.length;){var o=e[n++];i+=String.fromCharCode(o)}return i}const or="v1",rr=e=>{const t=Object.assign(Object.assign({},e),{v:or});return nr(tr(ir(JSON.stringify(t))))};var ar="2.0.2",ri=500,Fi="user-agent",Je="",Li="?",Lt="function",Le="undefined",Xe="object",ai="string",me="browser",Ae="cpu",Se="device",ve="engine",be="os",Ye="result",g="name",h="type",f="vendor",I="version",ge="architecture",Ct="major",p="model",ut="console",x="mobile",V="tablet",re="smarttv",we="wearable",Kt="xr",ht="embedded",ot="inapp",pi="brands",Ve="formFactors",mi="fullVersionList",je="platform",gi="platformVersion",Vt="bitness",De="sec-ch-ua",sr=De+"-full-version-list",cr=De+"-arch",lr=De+"-"+Vt,dr=De+"-form-factors",ur=De+"-"+x,hr=De+"-"+p,Tn=De+"-"+je,pr=Tn+"-version",Nn=[pi,mi,x,p,je,gi,ge,Ve,Vt],St="Amazon",Ze="Apple",Di="ASUS",Wi="BlackBerry",We="Google",Vi="Huawei",_i="Lenovo",Gi="Honor",kt="LG",zt="Microsoft",Ht="Motorola",Yt="Nvidia",Ui="OnePlus",jt="OPPO",rt="Samsung",Zi="Sharp",at="Sony",qt="Xiaomi",Pt="Zebra",Bi="Chrome",Ki="Chromium",Oe="Chromecast",mr="Edge",st="Firefox",ct="Opera",zi="Facebook",Hi="Sogou",Be="Mobile ",lt=" Browser",si="Windows",gr=typeof window!==Le,fe=gr&&window.navigator?window.navigator:void 0,Ee=fe&&fe.userAgentData?fe.userAgentData:void 0,fr=function(e,t){var i={},n=t;if(!Dt(t)){n={};for(var o in t)for(var r in t[o])n[r]=t[o][r].concat(n[r]?n[r]:[])}for(var a in e)i[a]=n[a]&&n[a].length%2===0?n[a].concat(e[a]):e[a];return i},_t=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},ci=function(e,t){if(typeof e===Xe&&e.length>0){for(var i in e)if(Me(e[i])==Me(t))return!0;return!1}return et(e)?Me(t).indexOf(Me(e))!==-1:!1},Dt=function(e,t){for(var i in e)return/^(browser|cpu|device|engine|os)$/.test(i)||(t?Dt(e[i]):!1)},et=function(e){return typeof e===ai},Qt=function(e){if(e){for(var t=[],i=$e(/\\?\"/g,e).split(","),n=0;n<i.length;n++)if(i[n].indexOf(";")>-1){var o=yt(i[n]).split(";v=");t[n]={brand:o[0],version:o[1]}}else t[n]=yt(i[n]);return t}},Me=function(e){return et(e)?e.toLowerCase():e},Jt=function(e){return et(e)?$e(/[^\d\.]/g,e).split(".")[0]:void 0},xe=function(e){for(var t in e){var i=e[t];typeof i==Xe&&i.length==2?this[i[0]]=i[1]:this[i]=void 0}return this},$e=function(e,t){return et(t)?t.replace(e,Je):t},dt=function(e){return $e(/\\?\"/g,e)},yt=function(e,t){if(et(e))return e=$e(/^\s\s*/,e),typeof t===Le?e:e.substring(0,ri)},Xt=function(e,t){if(!(!e||!t))for(var i=0,n,o,r,a,s,c;i<t.length&&!s;){var d=t[i],l=t[i+1];for(n=o=0;n<d.length&&!s&&d[n];)if(s=d[n++].exec(e),s)for(r=0;r<l.length;r++)c=s[++o],a=l[r],typeof a===Xe&&a.length>0?a.length===2?typeof a[1]==Lt?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:a.length===3?typeof a[1]===Lt&&!(a[1].exec&&a[1].test)?this[a[0]]=c?a[1].call(this,c,a[2]):void 0:this[a[0]]=c?c.replace(a[1],a[2]):void 0:a.length===4&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):void 0):this[a]=c||void 0;i+=2}},Fe=function(e,t){for(var i in t)if(typeof t[i]===Xe&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(ci(t[i][n],e))return i===Li?void 0:i}else if(ci(t[i],e))return i===Li?void 0:i;return t.hasOwnProperty("*")?t["*"]:e},Yi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ji={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},qi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[I,[g,Be+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[I,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,I],[/opios[\/ ]+([\w\.]+)/i],[I,[g,ct+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[I,[g,ct+" GX"]],[/\bopr\/([\w\.]+)/i],[I,[g,ct]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[I,[g,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[I,[g,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,I],[/quark(?:pc)?\/([-\w\.]+)/i],[I,[g,"Quark"]],[/\bddg\/([\w\.]+)/i],[I,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[I,[g,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[I,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[I,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[I,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[I,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[I,[g,"Smart "+_i+lt]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure"+lt],I],[/\bfocus\/([\w\.]+)/i],[I,[g,st+" Focus"]],[/\bopt\/([\w\.]+)/i],[I,[g,ct+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[I,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[I,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[I,[g,ct+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[I,[g,"MIUI"+lt]],[/fxios\/([\w\.-]+)/i],[I,[g,Be+st]],[/\bqihoobrowser\/?([\w\.]*)/i],[I,[g,"360"]],[/\b(qq)\/([\w\.]+)/i],[[g,/(.+)/,"$1Browser"],I],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1"+lt],I],[/samsungbrowser\/([\w\.]+)/i],[I,[g,rt+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[I,[g,Hi+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,Hi+" Mobile"],I],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[g,I],[/(lbbrowser|rekonq)/i],[g],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[I,g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,zi],I,[h,ot]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,I,[h,ot]],[/\bgsa\/([\w\.]+) .*safari\//i],[I,[g,"GSA"],[h,ot]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[I,[g,"TikTok"],[h,ot]],[/\[(linkedin)app\]/i],[g,[h,ot]],[/(chromium)[\/ ]([-\w\.]+)/i],[g,I],[/headlesschrome(?:\/([\w\.]+)| )/i],[I,[g,Bi+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,Bi+" WebView"],I],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[I,[g,"Android"+lt]],[/chrome\/([\w\.]+) mobile/i],[I,[g,Be+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,I],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[I,[g,Be+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[g,Be+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[I,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[I,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[g,I],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[g,Be+st],I],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],I],[/(wolvic|librewolf)\/([\w\.]+)/i],[g,I],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[I,[g,st+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[g,[I,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[g,[I,/[^\d\.]+./,Je]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[ge,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[ge,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[ge,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[ge,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[ge,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[ge,/ower/,Je,Me]],[/ sun4\w[;\)]/i],[[ge,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[ge,Me]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[f,rt],[h,V]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[p,[f,rt],[h,x]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[f,Ze],[h,x]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[f,Ze],[h,V]],[/(macintosh);/i],[p,[f,Ze]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[f,Zi],[h,x]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[p,[f,Gi],[h,V]],[/honor([-\w ]+)[;\)]/i],[p,[f,Gi],[h,x]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[p,[f,Vi],[h,V]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[f,Vi],[h,x]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[p,/_/g," "],[f,qt],[h,V]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[p,/_/g," "],[f,qt],[h,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[f,jt],[h,x]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[p,[f,Fe,{OnePlus:["304","403","203"],"*":jt}],[h,V]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[f,"Vivo"],[h,x]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[p,[f,"Realme"],[h,x]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[f,Ht],[h,x]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[f,Ht],[h,V]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[f,kt],[h,V]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[f,kt],[h,x]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[p,[f,_i],[h,V]],[/(nokia) (t[12][01])/i],[f,p,[h,V]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[p,/_/g," "],[h,x],[f,"Nokia"]],[/(pixel (c|tablet))\b/i],[p,[f,We],[h,V]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[f,We],[h,x]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[f,at],[h,x]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[f,at],[h,V]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[f,Ui],[h,x]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[f,St],[h,V]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[f,St],[h,x]],[/(playbook);[-\w\),; ]+(rim)/i],[p,f,[h,V]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[f,Wi],[h,x]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[f,Di],[h,V]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[f,Di],[h,x]],[/(nexus 9)/i],[p,[f,"HTC"],[h,V]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[p,/_/g," "],[h,x]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[p,[f,"TCL"],[h,V]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[p,[f,"TCL"],[h,x]],[/(itel) ((\w+))/i],[[f,Me],p,[h,Fe,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[f,"Acer"],[h,V]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[f,"Meizu"],[h,x]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[p,[f,"Ulefone"],[h,x]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[p,[f,"Energizer"],[h,x]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[p,[f,"Cat"],[h,x]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[p,[f,"Smartfren"],[h,x]],[/droid.+; (a(?:015|06[35]|142p?))/i],[p,[f,"Nothing"],[h,x]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[f,p,[h,V]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[f,p,[h,x]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[f,p,[h,V]],[/(surface duo)/i],[p,[f,zt],[h,V]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[f,"Fairphone"],[h,x]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[p,[f,Yt],[h,V]],[/(sprint) (\w+)/i],[f,p,[h,x]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[f,zt],[h,x]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[f,Pt],[h,V]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[f,Pt],[h,x]],[/smart-tv.+(samsung)/i],[f,[h,re]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[f,rt],[h,re]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,kt],[h,re]],[/(apple) ?tv/i],[f,[p,Ze+" TV"],[h,re]],[/crkey.*devicetype\/chromecast/i],[[p,Oe+" Third Generation"],[f,We],[h,re]],[/crkey.*devicetype\/([^/]*)/i],[[p,/^/,"Chromecast "],[f,We],[h,re]],[/fuchsia.*crkey/i],[[p,Oe+" Nest Hub"],[f,We],[h,re]],[/crkey/i],[[p,Oe],[f,We],[h,re]],[/droid.+aft(\w+)( bui|\))/i],[p,[f,St],[h,re]],[/(shield \w+ tv)/i],[p,[f,Yt],[h,re]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[f,Zi],[h,re]],[/(bravia[\w ]+)( bui|\))/i],[p,[f,at],[h,re]],[/(mi(tv|box)-?\w+) bui/i],[p,[f,qt],[h,re]],[/Hbbtv.*(technisat) (.*);/i],[f,p,[h,re]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,yt],[p,yt],[h,re]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[p,[h,re]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,re]],[/(ouya)/i,/(nintendo) (\w+)/i],[f,p,[h,ut]],[/droid.+; (shield)( bui|\))/i],[p,[f,Yt],[h,ut]],[/(playstation \w+)/i],[p,[f,at],[h,ut]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[f,zt],[h,ut]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[p,[f,rt],[h,we]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[f,p,[h,we]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[p,[f,jt],[h,we]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[f,Ze],[h,we]],[/(opwwe\d{3})/i],[p,[f,Ui],[h,we]],[/(moto 360)/i],[p,[f,Ht],[h,we]],[/(smartwatch 3)/i],[p,[f,at],[h,we]],[/(g watch r)/i],[p,[f,kt],[h,we]],[/droid.+; (wt63?0{2,3})\)/i],[p,[f,Pt],[h,we]],[/droid.+; (glass) \d/i],[p,[f,We],[h,Kt]],[/(pico) (4|neo3(?: link|pro)?)/i],[f,p,[h,Kt]],[/; (quest( \d| pro)?)/i],[p,[f,zi],[h,Kt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,ht]],[/(aeobc)\b/i],[p,[f,St],[h,ht]],[/(homepod).+mac os/i],[p,[f,Ze],[h,ht]],[/windows iot/i],[[h,ht]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[p,[h,Fe,{mobile:"Mobile",xr:"VR","*":V}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,V]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,x]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[p,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[I,[g,mr+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[g,I],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[I,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,I],[/ladybird\//i],[[g,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[I,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,I],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[g,[I,Fe,Yi]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[I,Fe,Yi],[g,si]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[I,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"macOS"],[I,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[I,[g,Oe+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[I,[g,Oe+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[I,[g,Oe+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[I,[g,Oe+" Linux"]],[/crkey\/([\d\.]+)/i],[I,[g,Oe]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[I,g],[/(ubuntu) ([\w\.]+) like android/i],[[g,/(.+)/,"$1 Touch"],I],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[g,I],[/\(bb(10);/i],[I,[g,Wi]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[I,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[I,[g,st+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[I,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[I,[g,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,"Chrome OS"],I],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,I],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],I],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,I]]},At=function(){var e={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return xe.call(e.init,[[me,[g,I,Ct,h]],[Ae,[ge]],[Se,[h,p,f]],[ve,[g,I]],[be,[g,I]]]),xe.call(e.isIgnore,[[me,[I,Ct]],[ve,[I]],[be,[I]]]),xe.call(e.isIgnoreRgx,[[me,/ ?browser$/i],[be,/ ?os$/i]]),xe.call(e.toString,[[me,[g,I]],[Ae,[ge]],[Se,[f,p]],[ve,[g,I]],[be,[g,I]]]),e}(),Ir=function(e,t){var i=At.init[t],n=At.isIgnore[t]||0,o=At.isIgnoreRgx[t]||0,r=At.toString[t]||0;function a(){xe.call(this,i)}return a.prototype.getItem=function(){return e},a.prototype.withClientHints=function(){return Ee?Ee.getHighEntropyValues(Nn).then(function(s){return e.setCH(new On(s,!1)).parseCH().get()}):e.parseCH().get()},a.prototype.withFeatureCheck=function(){return e.detectFeature().get()},t!=Ye&&(a.prototype.is=function(s){var c=!1;for(var d in this)if(this.hasOwnProperty(d)&&!ci(n,d)&&Me(o?$e(o,this[d]):this[d])==Me(o?$e(o,s):s)){if(c=!0,s!=Le)break}else if(s==Le&&c){c=!c;break}return c},a.prototype.toString=function(){var s=Je;for(var c in r)typeof this[r[c]]!==Le&&(s+=(s?" ":Je)+this[r[c]]);return s||Le}),Ee||(a.prototype.then=function(s){var c=this,d=function(){for(var u in c)c.hasOwnProperty(u)&&(this[u]=c[u])};d.prototype={is:a.prototype.is,toString:a.prototype.toString};var l=new d;return s(l),l}),new a};function On(e,t){if(e=e||{},xe.call(this,Nn),t)xe.call(this,[[pi,Qt(e[De])],[mi,Qt(e[sr])],[x,/\?1/.test(e[ur])],[p,dt(e[hr])],[je,dt(e[Tn])],[gi,dt(e[pr])],[ge,dt(e[cr])],[Ve,Qt(e[dr])],[Vt,dt(e[lr])]]);else for(var i in e)this.hasOwnProperty(i)&&typeof e[i]!==Le&&(this[i]=e[i])}function Pi(e,t,i,n){return this.get=function(o){return o?this.data.hasOwnProperty(o)?this.data[o]:void 0:this.data},this.set=function(o,r){return this.data[o]=r,this},this.setCH=function(o){return this.uaCH=o,this},this.detectFeature=function(){if(fe&&fe.userAgent==this.ua)switch(this.itemType){case me:fe.brave&&typeof fe.brave.isBrave==Lt&&this.set(g,"Brave");break;case Se:!this.get(h)&&Ee&&Ee[x]&&this.set(h,x),this.get(p)=="Macintosh"&&fe&&typeof fe.standalone!==Le&&fe.maxTouchPoints&&fe.maxTouchPoints>2&&this.set(p,"iPad").set(h,V);break;case be:!this.get(g)&&Ee&&Ee[je]&&this.set(g,Ee[je]);break;case Ye:var o=this.data,r=function(a){return o[a].getItem().detectFeature().get()};this.set(me,r(me)).set(Ae,r(Ae)).set(Se,r(Se)).set(ve,r(ve)).set(be,r(be))}return this},this.parseUA=function(){return this.itemType!=Ye&&Xt.call(this.data,this.ua,this.rgxMap),this.itemType==me&&this.set(Ct,Jt(this.get(I))),this},this.parseCH=function(){var o=this.uaCH,r=this.rgxMap;switch(this.itemType){case me:case ve:var a=o[mi]||o[pi],s;if(a)for(var c in a){var d=a[c].brand||a[c],l=a[c].version;this.itemType==me&&!/not.a.brand/i.test(d)&&(!s||/chrom/i.test(s)&&d!=Ki)&&(d=Fe(d,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome"}),this.set(g,d).set(I,l).set(Ct,Jt(l)),s=d),this.itemType==ve&&d==Ki&&this.set(I,l)}break;case Ae:var u=o[ge];u&&(u&&o[Vt]=="64"&&(u+="64"),Xt.call(this.data,u+";",r));break;case Se:if(o[x]&&this.set(h,x),o[p]&&(this.set(p,o[p]),!this.get(h)||!this.get(f))){var C={};Xt.call(C,"droid 9; "+o[p]+")",r),!this.get(h)&&C.type&&this.set(h,C.type),!this.get(f)&&C.vendor&&this.set(f,C.vendor)}if(o[Ve]){var b;if(typeof o[Ve]!="string")for(var m=0;!b&&m<o[Ve].length;)b=Fe(o[Ve][m++],ji);else b=Fe(o[Ve],ji);this.set(h,b)}break;case be:var w=o[je];if(w){var S=o[gi];w==si&&(S=parseInt(Jt(S),10)>=13?"11":"10"),this.set(g,w).set(I,S)}this.get(g)==si&&o[p]=="Xbox"&&this.set(g,"Xbox").set(I,void 0);break;case Ye:var k=this.data,v=function(y){return k[y].getItem().setCH(o).parseCH().get()};this.set(me,v(me)).set(Ae,v(Ae)).set(Se,v(Se)).set(ve,v(ve)).set(be,v(be))}return this},xe.call(this,[["itemType",e],["ua",t],["uaCH",n],["rgxMap",i],["data",Ir(this,e)]]),this}function Te(e,t,i){if(typeof e===Xe?(Dt(e,!0)?(typeof t===Xe&&(i=t),t=e):(i=e,t=void 0),e=void 0):typeof e===ai&&!Dt(t,!0)&&(i=t,t=void 0),i&&typeof i.append===Lt){var n={};i.forEach(function(c,d){n[d]=c}),i=n}if(!(this instanceof Te))return new Te(e,t,i).getResult();var o=typeof e===ai?e:i&&i[Fi]?i[Fi]:fe&&fe.userAgent?fe.userAgent:Je,r=new On(i,!0),a=t?fr(qi,t):qi,s=function(c){return c==Ye?function(){return new Pi(c,o,a,r).set("ua",o).set(me,this.getBrowser()).set(Ae,this.getCPU()).set(Se,this.getDevice()).set(ve,this.getEngine()).set(be,this.getOS()).get()}:function(){return new Pi(c,o,a[c],r).parseUA().get()}};return xe.call(this,[["getBrowser",s(me)],["getCPU",s(Ae)],["getDevice",s(Se)],["getEngine",s(ve)],["getOS",s(be)],["getResult",s(Ye)],["getUA",function(){return o}],["setUA",function(c){return et(c)&&(o=c.length>ri?yt(c,ri):c),this}]]).setUA(o),this}Te.VERSION=ar;Te.BROWSER=_t([g,I,Ct,h]);Te.CPU=_t([ge]);Te.DEVICE=_t([p,f,h,ut,x,re,V,we,ht]);Te.ENGINE=Te.OS=_t([g,I]);const br=500;class Rn{constructor(t){ue(this,"events",[]),ue(this,"eventIndex",0),ue(this,"lastShotedId",0),ue(this,"appId"),ue(this,"tenantId"),ue(this,"sessionId"),ue(this,"serverUrl"),ue(this,"interval"),ue(this,"recordOptions"),ue(this,"tags"),ue(this,"replacers"),ue(this,"systemInfo",null),ue(this,"visitorId"),ue(this,"COOKIE_NAME","_sp_vid"),ue(this,"COOKIE_DOMAIN"),ue(this,"COOKIE_MAX_AGE",365*24*60*60);const{tenantId:i,appId:n,serverUrl:o="https://www.softprobe.ai/api/v1/recording",interval:r=5e3,manual:a=!1,tags:s={},replacers:c={},...d}=t;if(!n)throw new Error("appId is required");if(!i)throw new Error("tenantId is required");this.tenantId=i,this.appId=n,this.sessionId=this.uuid(),this.serverUrl=o.startsWith("//")?`${window.location.protocol}${o}`:o,this.interval=Math.max(r,5e3),this.tags=s,this.replacers=c,this.recordOptions=d;const l=new URL(this.serverUrl);return this.COOKIE_DOMAIN=l.hostname.startsWith("localhost")?"localhost":`.${l.hostname.split(".").slice(-2).join(".")}`,this.visitorId=this.getOrCreateVisitorId(),!a&&this.record(),this}getOrCreateVisitorId(){const t=this.getCookie(this.COOKIE_NAME);if(t)return t;const i=this.uuid();return this.setCookie(this.COOKIE_NAME,i),i}setCookie(t,i){try{const n=window.location.hostname==="localhost",o=[`${t}=${encodeURIComponent(i)}`,...n?[]:[`domain=${this.COOKIE_DOMAIN}`],`max-age=${this.COOKIE_MAX_AGE}`,"path=/",...n?[]:["SameSite=None","Secure"]].join("; ");document.cookie=o}catch(n){throw console.error("Error in setCookie:",n),n}}getCookie(t){const i=document.cookie.split(";");for(const n of i){const[o,r]=n.trim().split("=");if(o===t)return r}return null}record(t){const{tags:i={},...n}=t||{},o=Qe({emit:async a=>{this.events.length>=br&&this.events.shift(),a.eventIndex=++this.eventIndex,a=this.compressEvent(a),this.events.push(a)},...this.recordOptions,...n}),r=setInterval(async()=>{if(this.save({tags:i}),this.events.length){const a=this.events[this.events.length-1].eventIndex;this.lastShotedId+50<a&&(Qe.takeFullSnapshot(),this.lastShotedId=a)}},this.interval);return{stop:()=>{clearInterval(r),o==null||o(),this.save({tags:i})}}}compressEvent(t){if(t.type===Qi.FullSnapshot)try{const i=rr(t.data);return{type:t.type,data:i,timestamp:t.timestamp,isCompressed:!0}}catch(i){console.error("Failed to compress the FullSnapshot event:",i)}return t}setTags(t,i=!1){this.tags=i?t:{...this.tags,...t}}async getSystemInfo(){const t=await new Te().getResult().withClientHints();return this.systemInfo={_sp_ua:t.ua,_sp_url:window.location.hostname+window.location.pathname,_sp_search:window.location.search,_sp_referer:document.referrer||null,_sp_os:t.os.name||"Unknown",_sp_osVersion:t.os.version||"Unknown",_sp_browser:t.browser.name||"Unknown",_sp_browserVersion:t.browser.version||"Unknown",_sp_cpu:t.cpu.architecture||"Unknown",_sp_device:t.device.type||"desktop",_sp_width:window.innerWidth,_sp_height:window.innerHeight,_sp_scrollWidth:document.documentElement.scrollWidth,_sp_scrollHeight:document.documentElement.scrollHeight,_sp_vid:this.visitorId},this.systemInfo}async save(t){if(this.events.length!==0&&!this.save.isSaving){this.save.isSaving=!0;try{this.systemInfo||(this.systemInfo=await this.getSystemInfo());const i={appId:this.appId,sessionId:this.sessionId,tenantId:this.tenantId,tags:{...this.systemInfo,...this.tags,...t==null?void 0:t.tags}};this.replacers&&Object.entries(this.replacers).forEach(([a,s])=>{a in i.tags&&s&&(i.tags[a]=s)});const n={events:this.events},o=JSON.stringify({metadata:i,data:n}),r=await this.sendData(o);if(!r.ok)throw new Error(`HTTP error! Status Code: ${r.status}. Details: ${await r.text()}`);this.events=[]}catch(i){console.error("Failed to save events:",i)}finally{this.save.isSaving=!1}}}async sendData(t){return fetch(this.serverUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:t,redirect:"follow"})}uuid(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+t/4).toString(16))}}function Cr(e){return new Rn(e)}window.RecordSdk=Rn;window.initSoftprobe=Cr;export{Rn as RecordSdk,Cr as default};
